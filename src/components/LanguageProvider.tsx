'use client';

import { createContext, useContext, useState, useEffect, ReactNode } from 'react';

type Language = 'en' | 'id' | 'es' | 'fr' | 'de' | 'ja' | 'zh';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

const translations: Record<Language, Record<string, string>> = {
  en: {
    home: "Home",
    search: "Search",
    explore: "Explore",
    messages: "Messages",
    notifications: "Notifications",
    create: "Create",
    profile: "Profile",
    work: "Work",
    settings: "Settings",
    logout: "Logout",
    pengaturan: "Settings",
    editProfil: "Edit Profile",
    notificationsMenu: "Notifications",
    accountPrivacy: "Account Privacy",
    closeFriend: "Close Friends",
    blocked: "Blocked",
    archiving: "Archiving & Downloading",
    language: "Language",
    editProfilTitle: "Edit Profile",
    loading: "Loading...",
    uploading: "Uploading...",
    ubahFoto: "Change Photo",
    hapusFoto: "Remove Photo",
    name: "Name",
    username: "Username",
    website: "Website",
    bio: "Bio",
    gender: "Gender",
    menyimpan: "Saving...",
    kirim: "Submit",
    notificationSettingsTitle: "Notification Settings",
    accountPrivacyTitle: "Account Privacy",
    closeFriendTitle: "Close Friends",
    blockedTitle: "Blocked Users",
    archivingTitle: "Archiving & Data Download",
    languageTitle: "Language Settings",
    remove: "Remove",
    unblock: "Unblock",
    downloadYourData: "Download Your Data",
    downloadDataDesc: "Download a copy of your Kollect data including profile, posts, campaigns, and works.",
    downloadAsJSON: "ğŸ“¥ Download as JSON",
    downloadAsCSV: "ğŸ“Š Download as CSV",
    selectLanguage: "Select Your Language",
    english: "English (EN)",
    indonesian: "Bahasa Indonesia (ID)",
    spanish: "EspaÃ±ol (ES)",
    french: "FranÃ§ais (FR)",
    german: "Deutsch (DE)",
    japanese: "æ—¥æœ¬èª (JA)",
    chinese: "ä¸­æ–‡ (ZH)",
    updating: "Updating...",
    goToLogin: "Go to Login",
    failedLoadProfile: "Failed to load profile",
    languageUpdated: "Language updated successfully!",
    failedUpdateLanguage: "Failed to update language",
  },
  id: {
    home: "Beranda",
    search: "Cari",
    explore: "Jelajahi",
    messages: "Pesan",
    notifications: "Notifikasi",
    create: "Buat",
    profile: "Profil",
    work: "Pekerjaan",
    settings: "Pengaturan",
    logout: "Keluar",
    pengaturan: "Pengaturan",
    editProfil: "Edit Profil",
    notificationsMenu: "Notifikasi",
    accountPrivacy: "Privasi Akun",
    closeFriend: "Teman Dekat",
    blocked: "Diblokir",
    archiving: "Pengarsipan & Unduhan",
    language: "Bahasa",
    editProfilTitle: "Edit Profil",
    loading: "Memuat...",
    uploading: "Mengunggah...",
    ubahFoto: "Ubah Foto",
    hapusFoto: "Hapus Foto",
    name: "Nama",
    username: "Nama Pengguna",
    website: "Situs Web",
    bio: "Bio",
    gender: "Jenis Kelamin",
    menyimpan: "Menyimpan...",
    kirim: "Kirim",
    notificationSettingsTitle: "Pengaturan Notifikasi",
    accountPrivacyTitle: "Privasi Akun",
    closeFriendTitle: "Teman Dekat",
    blockedTitle: "Pengguna Diblokir",
    archivingTitle: "Pengarsipan & Unduhan Data",
    languageTitle: "Pengaturan Bahasa",
    remove: "Hapus",
    unblock: "Buka Blokir",
    downloadYourData: "Unduh Data Anda",
    downloadDataDesc: "Unduh salinan data Kollect Anda termasuk profil, posting, kampanye, dan pekerjaan.",
    downloadAsJSON: "ğŸ“¥ Unduh sebagai JSON",
    downloadAsCSV: "ğŸ“Š Unduh sebagai CSV",
    selectLanguage: "Pilih Bahasa Anda",
    english: "English (EN)",
    indonesian: "Bahasa Indonesia (ID)",
    spanish: "EspaÃ±ol (ES)",
    french: "FranÃ§ais (FR)",
    german: "Deutsch (DE)",
    japanese: "æ—¥æœ¬èª (JA)",
    chinese: "ä¸­æ–‡ (ZH)",
    updating: "Memperbarui...",
    goToLogin: "Ke Login",
    failedLoadProfile: "Gagal memuat profil",
    languageUpdated: "Bahasa berhasil diperbarui!",
    failedUpdateLanguage: "Gagal memperbarui bahasa",
  },
  es: {
    home: "Inicio",
    search: "Buscar",
    explore: "Explorar",
    messages: "Mensajes",
    notifications: "Notificaciones",
    create: "Crear",
    profile: "Perfil",
    work: "Trabajo",
    settings: "ConfiguraciÃ³n",
    logout: "Cerrar sesiÃ³n",
    pengaturan: "ConfiguraciÃ³n",
    editProfil: "Editar Perfil",
    notificationsMenu: "Notificaciones",
    accountPrivacy: "Privacidad de la Cuenta",
    closeFriend: "Amigos Cercanos",
    blocked: "Bloqueados",
    archiving: "Archivado y Descarga",
    language: "Idioma",
    editProfilTitle: "Editar Perfil",
    loading: "Cargando...",
    uploading: "Subiendo...",
    ubahFoto: "Cambiar Foto",
    hapusFoto: "Eliminar Foto",
    name: "Nombre",
    username: "Nombre de Usuario",
    website: "Sitio Web",
    bio: "BiografÃ­a",
    gender: "GÃ©nero",
    menyimpan: "Guardando...",
    kirim: "Enviar",
    notificationSettingsTitle: "ConfiguraciÃ³n de Notificaciones",
    accountPrivacyTitle: "Privacidad de la Cuenta",
    closeFriendTitle: "Amigos Cercanos",
    blockedTitle: "Usuarios Bloqueados",
    archivingTitle: "Archivado y Descarga de Datos",
    languageTitle: "ConfiguraciÃ³n de Idioma",
    remove: "Eliminar",
    unblock: "Desbloquear",
    downloadYourData: "Descargue Sus Datos",
    downloadDataDesc: "Descargue una copia de sus datos de Kollect incluyendo perfil, publicaciones, campaÃ±as y trabajos.",
    downloadAsJSON: "ğŸ“¥ Descargar como JSON",
    downloadAsCSV: "ğŸ“Š Descargar como CSV",
    selectLanguage: "Seleccione Su Idioma",
    english: "English (EN)",
    indonesian: "Bahasa Indonesia (ID)",
    spanish: "EspaÃ±ol (ES)",
    french: "FranÃ§ais (FR)",
    german: "Deutsch (DE)",
    japanese: "æ—¥æœ¬èª (JA)",
    chinese: "ä¸­æ–‡ (ZH)",
    updating: "Actualizando...",
    goToLogin: "Ir a Iniciar SesiÃ³n",
    failedLoadProfile: "Error al cargar el perfil",
    languageUpdated: "Â¡Idioma actualizado correctamente!",
    failedUpdateLanguage: "Error al actualizar el idioma",
  },
  fr: {
    home: "Accueil",
    search: "Rechercher",
    explore: "Explorer",
    messages: "Messages",
    notifications: "Notifications",
    create: "CrÃ©er",
    profile: "Profil",
    work: "Travail",
    settings: "ParamÃ¨tres",
    logout: "DÃ©connexion",
    pengaturan: "ParamÃ¨tres",
    editProfil: "Modifier le Profil",
    notificationsMenu: "Notifications",
    accountPrivacy: "ConfidentialitÃ© du Compte",
    closeFriend: "Amis Proches",
    blocked: "BloquÃ©s",
    archiving: "Archivage et TÃ©lÃ©chargement",
    language: "Langue",
    editProfilTitle: "Modifier le Profil",
    loading: "Chargement...",
    uploading: "TÃ©lÃ©chargement...",
    ubahFoto: "Changer la Photo",
    hapusFoto: "Supprimer la Photo",
    name: "Nom",
    username: "Nom d'Utilisateur",
    website: "Site Web",
    bio: "Biographie",
    gender: "Genre",
    menyimpan: "Enregistrement...",
    kirim: "Envoyer",
    notificationSettingsTitle: "ParamÃ¨tres de Notification",
    accountPrivacyTitle: "ConfidentialitÃ© du Compte",
    closeFriendTitle: "Amis Proches",
    blockedTitle: "Utilisateurs BloquÃ©s",
    archivingTitle: "Archivage et TÃ©lÃ©chargement de DonnÃ©es",
    languageTitle: "ParamÃ¨tres de Langue",
    remove: "Supprimer",
    unblock: "DÃ©bloquer",
    downloadYourData: "TÃ©lÃ©charger Vos DonnÃ©es",
    downloadDataDesc: "TÃ©lÃ©chargez une copie de vos donnÃ©es Kollect incluant profil, publications, campagnes et travaux.",
    downloadAsJSON: "ğŸ“¥ TÃ©lÃ©charger en JSON",
    downloadAsCSV: "ğŸ“Š TÃ©lÃ©charger en CSV",
    selectLanguage: "SÃ©lectionnez Votre Langue",
    english: "English (EN)",
    indonesian: "Bahasa Indonesia (ID)",
    spanish: "EspaÃ±ol (ES)",
    french: "FranÃ§ais (FR)",
    german: "Deutsch (DE)",
    japanese: "æ—¥æœ¬èª (JA)",
    chinese: "ä¸­æ–‡ (ZH)",
    updating: "Mise Ã  jour...",
    goToLogin: "Aller Ã  la Connexion",
    failedLoadProfile: "Ã‰chec du chargement du profil",
    languageUpdated: "Langue mise Ã  jour avec succÃ¨s!",
    failedUpdateLanguage: "Ã‰chec de la mise Ã  jour de la langue",
  },
  de: {
    home: "Startseite",
    search: "Suche",
    explore: "Erkunden",
    messages: "Nachrichten",
    notifications: "Benachrichtigungen",
    create: "Erstellen",
    profile: "Profil",
    work: "Arbeit",
    settings: "Einstellungen",
    logout: "Abmelden",
    pengaturan: "Einstellungen",
    editProfil: "Profil Bearbeiten",
    notificationsMenu: "Benachrichtigungen",
    accountPrivacy: "Kontodatenschutz",
    closeFriend: "Enge Freunde",
    blocked: "Blockiert",
    archiving: "Archivierung und Download",
    language: "Sprache",
    editProfilTitle: "Profil Bearbeiten",
    loading: "Wird geladen...",
    uploading: "Wird hochgeladen...",
    ubahFoto: "Foto Ã„ndern",
    hapusFoto: "Foto LÃ¶schen",
    name: "Name",
    username: "Benutzername",
    website: "Website",
    bio: "Biographie",
    gender: "Geschlecht",
    menyimpan: "Wird gespeichert...",
    kirim: "Absenden",
    notificationSettingsTitle: "Benachrichtigungseinstellungen",
    accountPrivacyTitle: "Kontodatenschutz",
    closeFriendTitle: "Enge Freunde",
    blockedTitle: "Blockierte Benutzer",
    archivingTitle: "Archivierung und Dateidownload",
    languageTitle: "Spracheinstellungen",
    remove: "Entfernen",
    unblock: "Entsperren",
    downloadYourData: "Ihre Daten Herunterladen",
    downloadDataDesc: "Laden Sie eine Kopie Ihrer Kollect-Daten herunter, einschlieÃŸlich Profil, BeitrÃ¤ge, Kampagnen und Arbeit.",
    downloadAsJSON: "ğŸ“¥ Als JSON Herunterladen",
    downloadAsCSV: "ğŸ“Š Als CSV Herunterladen",
    selectLanguage: "WÃ¤hlen Sie Ihre Sprache",
    english: "English (EN)",
    indonesian: "Bahasa Indonesia (ID)",
    spanish: "EspaÃ±ol (ES)",
    french: "FranÃ§ais (FR)",
    german: "Deutsch (DE)",
    japanese: "æ—¥æœ¬èª (JA)",
    chinese: "ä¸­æ–‡ (ZH)",
    updating: "Wird aktualisiert...",
    goToLogin: "Zur Anmeldung",
    failedLoadProfile: "Fehler beim Laden des Profils",
    languageUpdated: "Sprache erfolgreich aktualisiert!",
    failedUpdateLanguage: "Fehler beim Aktualisieren der Sprache",
  },
  ja: {
    home: "ãƒ›ãƒ¼ãƒ ",
    search: "æ¤œç´¢",
    explore: "æ¢ç´¢",
    messages: "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
    notifications: "é€šçŸ¥",
    create: "ä½œæˆ",
    profile: "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«",
    work: "ä½œå“",
    settings: "è¨­å®š",
    logout: "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ",
    pengaturan: "è¨­å®š",
    editProfil: "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ç·¨é›†",
    notificationsMenu: "é€šçŸ¥",
    accountPrivacy: "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼",
    closeFriend: "è¦ªå‹",
    blocked: "ãƒ–ãƒ­ãƒƒã‚¯æ¸ˆã¿",
    archiving: "ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
    language: "è¨€èª",
    editProfilTitle: "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ç·¨é›†",
    loading: "èª­ã¿è¾¼ã¿ä¸­...",
    uploading: "ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­...",
    ubahFoto: "å†™çœŸã‚’å¤‰æ›´",
    hapusFoto: "å†™çœŸã‚’å‰Šé™¤",
    name: "åå‰",
    username: "ãƒ¦ãƒ¼ã‚¶ãƒ¼å",
    website: "ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ",
    bio: "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«",
    gender: "æ€§åˆ¥",
    menyimpan: "ä¿å­˜ä¸­...",
    kirim: "é€ä¿¡",
    notificationSettingsTitle: "é€šçŸ¥è¨­å®š",
    accountPrivacyTitle: "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼",
    closeFriendTitle: "è¦ªå‹",
    blockedTitle: "ãƒ–ãƒ­ãƒƒã‚¯æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼",
    archivingTitle: "ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã¨ãƒ‡ãƒ¼ã‚¿ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
    languageTitle: "è¨€èªè¨­å®š",
    remove: "å‰Šé™¤",
    unblock: "ãƒ–ãƒ­ãƒƒã‚¯è§£é™¤",
    downloadYourData: "ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
    downloadDataDesc: "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã€æŠ•ç¨¿ã€ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã€ä½œå“ã‚’å«ã‚€Kollectãƒ‡ãƒ¼ã‚¿ã®ã‚³ãƒ”ãƒ¼ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚",
    downloadAsJSON: "ğŸ“¥ JSONã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
    downloadAsCSV: "ğŸ“Š CSVã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
    selectLanguage: "è¨€èªã‚’é¸æŠ",
    english: "English (EN)",
    indonesian: "Bahasa Indonesia (ID)",
    spanish: "EspaÃ±ol (ES)",
    french: "FranÃ§ais (FR)",
    german: "Deutsch (DE)",
    japanese: "æ—¥æœ¬èª (JA)",
    chinese: "ä¸­æ–‡ (ZH)",
    updating: "æ›´æ–°ä¸­...",
    goToLogin: "ãƒ­ã‚°ã‚¤ãƒ³ã¸",
    failedLoadProfile: "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«èª­ã¿è¾¼ã¿å¤±æ•—",
    languageUpdated: "è¨€èªãŒæ­£å¸¸ã«æ›´æ–°ã•ã‚Œã¾ã—ãŸ!",
    failedUpdateLanguage: "è¨€èªæ›´æ–°å¤±æ•—",
  },
  zh: {
    home: "é¦–é¡µ",
    search: "æœç´¢",
    explore: "æ¢ç´¢",
    messages: "æ¶ˆæ¯",
    notifications: "é€šçŸ¥",
    create: "åˆ›å»º",
    profile: "ä¸ªäººèµ„æ–™",
    work: "ä½œå“",
    settings: "è®¾ç½®",
    logout: "ç™»å‡º",
    pengaturan: "è®¾ç½®",
    editProfil: "ç¼–è¾‘ä¸ªäººèµ„æ–™",
    notificationsMenu: "é€šçŸ¥",
    accountPrivacy: "è´¦æˆ·éšç§",
    closeFriend: "äº²å¯†å¥½å‹",
    blocked: "å·²å±è”½",
    archiving: "å­˜æ¡£å’Œä¸‹è½½",
    language: "è¯­è¨€",
    editProfilTitle: "ç¼–è¾‘ä¸ªäººèµ„æ–™",
    loading: "åŠ è½½ä¸­...",
    uploading: "ä¸Šä¼ ä¸­...",
    ubahFoto: "æ›´æ”¹ç…§ç‰‡",
    hapusFoto: "åˆ é™¤ç…§ç‰‡",
    name: "åç§°",
    username: "ç”¨æˆ·å",
    website: "ç½‘ç«™",
    bio: "ç®€ä»‹",
    gender: "æ€§åˆ«",
    menyimpan: "ä¿å­˜ä¸­...",
    kirim: "æäº¤",
    notificationSettingsTitle: "é€šçŸ¥è®¾ç½®",
    accountPrivacyTitle: "è´¦æˆ·éšç§",
    closeFriendTitle: "äº²å¯†å¥½å‹",
    blockedTitle: "å·²å±è”½çš„ç”¨æˆ·",
    archivingTitle: "å­˜æ¡£å’Œæ•°æ®ä¸‹è½½",
    languageTitle: "è¯­è¨€è®¾ç½®",
    remove: "åˆ é™¤",
    unblock: "å–æ¶ˆå±è”½",
    downloadYourData: "ä¸‹è½½æ‚¨çš„æ•°æ®",
    downloadDataDesc: "ä¸‹è½½æ‚¨çš„Kollectæ•°æ®å‰¯æœ¬ï¼ŒåŒ…æ‹¬ä¸ªäººèµ„æ–™ã€å¸–å­ã€æ´»åŠ¨å’Œä½œå“ã€‚",
    downloadAsJSON: "ğŸ“¥ ä¸‹è½½ä¸ºJSON",
    downloadAsCSV: "ğŸ“Š ä¸‹è½½ä¸ºCSV",
    selectLanguage: "é€‰æ‹©æ‚¨çš„è¯­è¨€",
    english: "English (EN)",
    indonesian: "Bahasa Indonesia (ID)",
    spanish: "EspaÃ±ol (ES)",
    french: "FranÃ§ais (FR)",
    german: "Deutsch (DE)",
    japanese: "æ—¥æœ¬èª (JA)",
    chinese: "ä¸­æ–‡ (ZH)",
    updating: "æ›´æ–°ä¸­...",
    goToLogin: "å‰å¾€ç™»å½•",
    failedLoadProfile: "åŠ è½½ä¸ªäººèµ„æ–™å¤±è´¥",
    languageUpdated: "è¯­è¨€æ›´æ–°æˆåŠŸ!",
    failedUpdateLanguage: "è¯­è¨€æ›´æ–°å¤±è´¥",
  },
};

export function LanguageProvider({ children }: { children: ReactNode }) {
  const [language, setLanguageState] = useState<Language>('en');

  useEffect(() => {
    const saved = localStorage.getItem('language') as Language;
    if (saved && ['en', 'id', 'es', 'fr', 'de', 'ja', 'zh'].includes(saved)) {
      setLanguageState(saved);
    }
  }, []);

  const setLanguage = (lang: Language) => {
    setLanguageState(lang);
    localStorage.setItem('language', lang);
  };

  const t = (key: string): string => translations[language][key] || key;

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage(): LanguageContextType {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within LanguageProvider');
  }
  return context;
}